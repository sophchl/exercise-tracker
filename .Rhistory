labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~paste('</br> Type: ', all_types,
'</br> Duration: ', duration, 'h'),
textposition = "top right",
hovertemplate = paste('%{text}'),
marker = list(size = ~duration %>% rescale(to = c(15,30))))
plot
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~paste('</br> Type: ', all_types,
'</br> Duration: ', duration, 'h'),
hovertemplate = paste('%{text}'),
marker = list(size = ~duration %>% rescale(to = c(15,30)))) %>%
add_text(textposition = "top right")
plot
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~all_types,
hovertemplate = paste('%{text}', '{%duration}'),
marker = list(size = ~duration %>% rescale(to = c(15,30)))) %>%
add_text(textposition = "top right")
plot
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~all_types,
hovertemplate = paste('%{text}', '{%duration}'),
size = ~duration %>% rescale(to = c(15,30)) %>%
add_text(textposition = "top right")
# disconnect
plot
}
## update ---------
updateData <- function(table, id, variable, new_value, value_is_numeric) {
# Connect to the database
db <- dbConnect(SQLite(), sqlitePath)
# query
if(value_is_numeric == TRUE){
new_value <- as.numeric(new_value)
}
if (table == "responses_main"){
query <- sprintf("UPDATE responses_main SET %s = %s WHERE rowid == %s",
variable, new_value, id)
} else {
query <- sprintf("UPDATE %s SET %s = %s WHERE id == %s",
table, variable, new_value, id)
}
dbSendQuery(db, query)
dbDisconnect(db)
}
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~all_types,
hovertemplate = paste('%{text}', '{%duration}'),
size = ~duration %>% rescale(to = c(15,30))) %>%
add_text(textposition = "top right")
plot
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~all_types,
hovertemplate = paste('%{text}', '{%duration}'),
textposition = "top right",
marker = list(size = ~duration %>% rescale(to = c(15,30))))
plot
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~all_types,
labels = ~duration,
hovertemplate = paste('%{text}', '{%labels}'),
textposition = "top right",
marker = list(size = ~duration %>% rescale(to = c(15,30))))
plot
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~all_types,
hovertemplate = paste('%{text}'),
marker = list(size = ~duration %>% rescale(to = c(15,30))))
plot
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~paste('</br> Type: ', all_types,
'</br> Duration: ', duration, 'h'),
hovertemplate = paste('%{text}'),
marker = list(size = ~duration %>% rescale(to = c(15,30))))
plot
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~paste('</br> Type: ', all_types,
'</br> Duration: ', duration, 'h'),
hovertemplate = paste('%{text}'),
marker = list(size = ~duration %>% rescale(to = c(15,30)))) %>%
add_text(text = ~duration)
plot
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~paste('</br> Type: ', all_types,
'</br> Duration: ', duration, 'h'),
hovertemplate = paste('%{text}'),
marker = list(size = ~duration %>% rescale(to = c(15,30)),
text = ~duration))
plot
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~paste('</br> Type: ', all_types,
'</br> Duration: ', duration, 'h'),
hovertemplate = paste('%{text}'),
marker = list(size = ~duration %>% rescale(to = c(15,30)),
text = ~duration,
textposition = "top right"))
plot
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~paste('</br> Type: ', all_types,
'</br> Duration: ', duration, 'h'),
hovertemplate = paste('%{text}')) %>%
add_markers(list(size = ~duration %>% rescale(to = c(15,30)))) %>%
add_text(text = ~duration, textposition = "top right"))
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~paste('</br> Type: ', all_types,
'</br> Duration: ', duration, 'h'),
hovertemplate = paste('%{text}')) %>%
add_markers(list(size = ~duration %>% rescale(to = c(15,30)))) %>%
add_text(text = ~duration, textposition = "top right")
ploit
plot
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~paste('</br> Type: ', all_types,
'</br> Duration: ', duration, 'h'),
hovertemplate = paste('%{text}'),
marker = list(size = ~duration %>% rescale(to = c(15,30)))
# disconnect
plot
}
## update ---------
updateData <- function(table, id, variable, new_value, value_is_numeric) {
# Connect to the database
db <- dbConnect(SQLite(), sqlitePath)
# query
if(value_is_numeric == TRUE){
new_value <- as.numeric(new_value)
}
if (table == "responses_main"){
query <- sprintf("UPDATE responses_main SET %s = %s WHERE rowid == %s",
variable, new_value, id)
} else {
query <- sprintf("UPDATE %s SET %s = %s WHERE id == %s",
table, variable, new_value, id)
}
dbSendQuery(db, query)
dbDisconnect(db)
}
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~paste('</br> Type: ', all_types,
'</br> Duration: ', duration, 'h'),
hovertemplate = paste('%{text}'),
marker = list(size = ~duration %>% rescale(to = c(15,30))))
plot
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~paste('</br> Type: ', all_types,
'</br> Duration: ', duration, 'h'),
hovertemplate = paste('%{text}'),
marker = list(size = ~duration %>% rescale(to = c(15,30)))) %>%
add_text()
plot
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~paste('</br> Type: ', all_types,
'</br> Duration: ', duration, 'h'),
hovertemplate = paste('%{text}'),
marker = list(size = ~duration %>% rescale(to = c(15,30)))) %>%
add_text(textposition = "top right")
plot
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~all_types,
hovertemplate = paste('%{text}'),
marker = list(size = ~duration %>% rescale(to = c(15,30)))) %>%
add_text(textposition = "top right")
plot
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~all_types,
hovertemplate = paste('Type: ', '%{text}'),
marker = list(size = ~duration %>% rescale(to = c(15,30)))) %>%
add_text(textposition = "top right")
plot
add_markers(marker = list(size = ~duration %>% rescale(to = c(15,30)))) %>%
add_text(textposition = "top right")
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~all_types,
hovertemplate = paste('Type: ', '%{text}')) %>%
add_markers(marker = list(size = ~duration %>% rescale(to = c(15,30)))) %>%
add_text(textposition = "top right")
plot
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~all_types,
hovertemplate = paste('Type: ', '%{text}')) %>%
add_markers(marker = list(size = ~duration %>% rescale(to = c(15,30)))) %>%
add_text(text = text, textposition = "top right")
plot
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~all_types,
hovertemplate = paste('Type: ', '%{text}')) %>%
add_markers(marker = list(size = ~duration %>% rescale(to = c(15,30))))
plot
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
text = ~all_types,
hovertemplate = paste('Type: ', '%{text}')) %>%
add_markers(marker = list(size = ~duration %>% rescale(to = c(15,30)),
color = ~type, colors = "Set2", ))
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
text = ~all_types,
hovertemplate = paste('Type: ', '%{text}')) %>%
add_markers(marker = list(size = ~duration %>% rescale(to = c(15,30)),
color = ~type, colors = "Set2"))
plot
# plot data
plot <- data_all %>%
mutate(level = factor(level,
levels = c("very_low", "low", "medium", "high", "very_high", "extreme"),
labels = c("very low", "low", "medium", "high", "very high", "extreme"),
ordered = TRUE),
date = as.Date(date, origin = lubridate::origin)) %>%
plot_ly(x = ~date, y = ~level, type = "scatter", mode = "markers",
color = ~type, colors = "Set2",
text = ~paste('</br> Type: ', all_types,
'</br> Duration: ', duration, 'h'),
hovertemplate = paste('%{text}'),
marker = list(size = ~duration %>% rescale(to = c(15,30))))
plot
data_all
date_range
data_all
data
# merge data
data_all <- data %>%
left_join(strength_data, by = c("rowid" = "id")) %>%
left_join(endurance_data, by = c("rowid" = "id")) %>%
left_join(climbing_data, by = c("rowid" = "id")) %>%
left_join(other_data, by = c("rowid" = "id")) %>%
left_join(rest_data, by = c("rowid" = "id")) %>%
unite("all_types", muscle:rest_activity, na.rm = TRUE)
data_all
# merge data
data_all <- data %>%
left_join(strength_data, by = c("rowid" = "id")) %>%
left_join(endurance_data, by = c("rowid" = "id")) %>%
left_join(climbing_data, by = c("rowid" = "id")) %>%
left_join(other_data, by = c("rowid" = "id")) %>%
left_join(rest_data, by = c("rowid" = "id"))
data_all
data_all %>%
plot_ly(y = ~type, type = "bar")
data_all %>%
plot_ly(x = ~type, type = "bar")
data_all %>%
plot_ly(x = ~type, type = "histogram")
data_all %>%
plot_ly(x = ~type, type = "histogram", color = ~type_all, barmode = "group")
# merge data
data_all <- data %>%
left_join(strength_data, by = c("rowid" = "id")) %>%
left_join(endurance_data, by = c("rowid" = "id")) %>%
left_join(climbing_data, by = c("rowid" = "id")) %>%
left_join(other_data, by = c("rowid" = "id")) %>%
left_join(rest_data, by = c("rowid" = "id")) %>%
unite("all_types", muscle:rest_activity, na.rm = TRUE) %>%
mutate(all_types = recode(all_types, "NULL" = "none"))
data_all %>%
plot_ly(x = ~type, type = "histogram", color = ~type_all, barmode = "group")
data_all %>%
plot_ly(x = ~type, type = "histogram", color = ~all_typesl barmode = "group")
data_all %>%
plot_ly(x = ~type, type = "histogram", color = ~all_types, barmode = "group")
data_all %>%
plot_ly(x = ~type, type = "histogram", color = ~all_types) %>%
layout(barmode = "overlay")
data_all %>%
plot_ly(x = ~type, type = "histogram", color = ~all_types) %>%
layout(barmode = "overlay", yaxis = list(type = "linear"))
data_all %>%
plot_ly(x = ~type, type = "histogram", color = ~all_types) %>%
layout(barmode = "overlay")
plot
source('C:/Users/Sophia/Dropbox/01_studium/04_projects/ShinyExercise/helpers_rsqlite.R', echo=TRUE)
runApp('shiny-exercise')
runApp('shiny-exercise')
runApp('shiny-exercise')
source('C:/Users/Sophia/Dropbox/01_Studium/04_projects/ShinyExercise/create_database.R', echo=TRUE)
runApp('shiny-exercise')
sqlitePath <- "shiny-exercise/data/exerciseDB.db"
# Connect to the database
db <- dbConnect(SQLite(), sqlitePath)
dbGetQuery(db, "SELECT * FROM responses_main")
data %>% mutate(duration = sum(duration_h, duration_m/60))
data
data <- dbGetQuery(db, "SELECT * FROM responses_main")
data
data %>% mutate(duration = sum("duration_h", "duration_m"/60))
data$duration_h %>% class()
data %>% mutate(duration = sum(duration_h, duration_m))
data %>% mutate(duration = sum(duration_h, duration_m/60))
source('C:/Users/Sophia/Dropbox/01_studium/04_projects/ShinyExercise/helpers_rsqlite.R', echo=TRUE)
runApp('shiny-exercise')
runApp('shiny-exercise')
dat
data
runApp('shiny-exercise')
source('C:/Users/Sophia/Dropbox/01_Studium/04_projects/ShinyExercise/create_database.R', echo=TRUE)
source('C:/Users/Sophia/Dropbox/01_studium/04_projects/ShinyExercise/helpers_rsqlite.R', echo=TRUE)
shiny::runApp('shiny-exercise')
runApp('shiny-exercise')
library(scale)
runApp('shiny-exercise')
runApp('shiny-exercise')
runApp('shiny-exercise')
table = "responses_climbing"
variable = "focus"
new_value = "just_climbing"
id = 2
query <- sprintf("UPDATE %s SET %s = %s WHERE id == %s",
table, variable, new_value, id)
query
runApp('shiny-exercise')
runApp('shiny-exercise')
runApp('shiny-exercise')
runApp('shiny-exercise')
runApp('shiny-exercise')
runApp('shiny-exercise')
source('C:/Users/Sophia/Dropbox/01_studium/04_projects/ShinyExercise/helpers_rsqlite.R', echo=TRUE)
runApp('shiny-exercise')
source('C:/Users/Sophia/Dropbox/01_studium/04_projects/ShinyExercise/helpers_rsqlite.R', echo=TRUE)
shiny::runApp('shiny-exercise')
runApp('shiny-exercise')
